---
description: Critical rules for working with the documentation system to avoid common pitfalls
globs: ["docs/**/*.md", "**/*.md"]
alwaysApply: true
---

# Documentation System Rules

## ğŸš« **NEVER DO THESE THINGS**

### âŒ **Never pipe commands that expect interactive output**
```bash
# âŒ NEVER DO THIS - IT ALWAYS BLOCKS/HANGS
pnpm docs:validate | head
pnpm docs:validate | less
pnpm docs:validate | more
pnpm docs:validate | cat

# âœ… Instead, use these alternatives:
pnpm docs:validate 2>&1 | grep "specific-pattern"
pnpm docs:validate 2>&1 | tail -10
pnpm docs:validate 2>&1 | wc -l
```

**Why:** Commands like `head`, `less`, `more`, `cat` interfere with output stream handling, causing hangs.

### âŒ **Never run docs:validate directly in terminal**
```bash
# âŒ NEVER DO THIS - Output can be overwhelming and hard to analyze
pnpm docs:validate

# âœ… ALWAYS pipe to file first, then analyze the file:
pnpm docs:validate > docs_validate_output.log 2>&1
# Then read the file:
cat docs_validate_output.log
# Or search within it:
grep "warning" docs_validate_output.log
grep "error" docs_validate_output.log
```

**Why:** Direct output is overwhelming and makes analysis difficult. Always capture to file first.

### âŒ **Never assume list indentation without checking**
- Always check actual remark-lint rule documentation
- `remark-lint-list-item-bullet-indent` prevents spaces BEFORE bullets
- `remark-lint-list-item-indent` controls spacing WITHIN list items

### âŒ **Never bypass pre-commit hooks without understanding why**
```bash
# âŒ Don't just use --no-verify without understanding
git commit --no-verify

# âœ… Understand why the hook is failing first
```

## âœ… **ALWAYS DO THESE THINGS**

### âœ… **Always check actual file content when investigating warnings**
```bash
# Check specific lines mentioned in warnings
sed -n '89p' docs/some-file.md
sed -n '90p' docs/some-file.md
```

### âœ… **Always test configuration changes incrementally**
1. Make small changes
2. Test immediately
3. Verify the change worked
4. Make next change

## ğŸ”§ **Debugging Commands That Work**
```bash
# ALWAYS capture validation output to file first
pnpm docs:validate > docs_validate_output.log 2>&1

# Then analyze the captured output:
# Count warnings by type
grep "list-item-bullet-indent" docs_validate_output.log | wc -l

# See last few warnings
tail -10 docs_validate_output.log

# Search for specific patterns
grep "warning" docs_validate_output.log
grep "error" docs_validate_output.log

# Preview changes without applying
pnpm docs:check

# Apply fixes and validate
pnpm docs:fix
```

## ğŸ“š **List Indentation Rules**
- **`remark-lint-list-item-bullet-indent`**: Prevents spaces before bullets (e.g., ` *` â†’ `*`)
- **`remark-lint-list-item-indent`**: Controls spacing after bullets (configured to `'one'`)

### Proper Nested List Format
```markdown
- Item 1
    - Sub item 1
    - Sub item 2
- Item 2
```

NOT:
```markdown
- Item 1
 * Sub item 1 âŒ Space before bullet
 * Sub item 2 âŒ Space before bullet
- Item 2
```
